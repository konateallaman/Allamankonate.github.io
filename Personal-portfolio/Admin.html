<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin — Portfolio</title>
  <link href="styles-v2.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
</head>
<body>
<header class="site-header"><div class="container nav"><a href="index-v2.html" class="brand"><div class="logo">AK</div></a><div class="subtitle">Admin</div></div></header>
<main class="container">
  <h2>Admin Panel</h2>
  <p class="muted">Edit the projects shown on your portfolio. This demo uses <strong>localStorage</strong> so no backend is required.</p>

  <section id="admin-section" style="margin-top:1rem">
    <h3>Projects</h3>

    <div id="project-form" style="background:var(--bg-1);padding:1rem;border-radius:8px;border:1px solid var(--card);margin-bottom:1rem">
      <h4>Add / Edit Project</h4>
      <label>Title<br><input id="p-title" type="text" style="width:100%"></label><br><br>
      <label>Description<br><textarea id="p-desc" style="width:100%" rows="3"></textarea></label><br><br>
      <label>Tech Tags (comma separated)<br><input id="p-tags" type="text" style="width:100%"></label><br><br>
      <button id="save-project" class="btn">Save Project</button>
    </div>

    <div id="project-list"></div>
  </section>
</main>
<script>
  const listEl = document.getElementById('project-list');
  const titleEl = document.getElementById('p-title');
  const descEl = document.getElementById('p-desc');
  const tagsEl = document.getElementById('p-tags');
  const saveBtn = document.getElementById('save-project');

  function loadProjects() {
    return JSON.parse(localStorage.getItem('projects')) || [];
  }

  function saveProjects(p) {
    localStorage.setItem('projects', JSON.stringify(p));
  }

  function render() {
    const projects = loadProjects();
    listEl.innerHTML = '';
    projects.forEach((p,i) => {
      const card = document.createElement('div');
      card.className = 'project';
      card.style.marginTop = '1rem';
      card.innerHTML = `<h4>${p.title}</h4><p class="muted">${p.description}</p><p><strong>Tags:</strong> ${p.tags.join(', ')}</p><button data-i="${i}" class="edit-btn btn-outline">Edit</button> <button data-i="${i}" class="delete-btn btn-outline" style="color:#ff4e4e;border-color:#ff4e4e">Delete</button>`;
      listEl.appendChild(card);
    });
  }

  saveBtn.onclick = () => {
    const projects = loadProjects();
    const t = titleEl.value.trim();
    const d = descEl.value.trim();
    const tags = tagsEl.value.split(',').map(s=>s.trim()).filter(s=>s);
    if(!t) return alert('Title required');
    projects.push({title:t,description:d,tags});
    saveProjects(projects);
    titleEl.value = descEl.value = tagsEl.value = '';
    render();
  };

  listEl.onclick = (e) => {
    if(e.target.classList.contains('delete-btn')){
      const i = e.target.dataset.i;
      const projects = loadProjects();
      projects.splice(i,1);
      saveProjects(projects);
      render();
    }
    if(e.target.classList.contains('edit-btn')){
      const i = e.target.dataset.i;
      const p = loadProjects()[i];
      titleEl.value = p.title;
      descEl.value = p.description;
      tagsEl.value = p.tags.join(', ');
      // Remove old entry before saving updated
      const projects = loadProjects();
      projects.splice(i,1);
      saveProjects(projects);
      render();
    }
  };

  render();
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
<footer class="site-footer"><div class="container">© <span id="year"></span> Allaman Konate</div></footer>
<script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</body>
</html>
